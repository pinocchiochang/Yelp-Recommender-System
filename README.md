# Yelp_Recommender_System

NOTE:
We used scala to write spark commands. To run the commands correctly, please load the helper functions at the bottom of each file first. These helper functions were used in map/reduce task in spark. 

TOOLS USED IN THIS PROJECT:
MapReduce, spark, Hive

Data are available on https://www.yelp.com/dataset_challenge/dataset
===================================================================================
Explaination of each file or zip archive 

TwitterStreaming.java
Collect tweets in Las Vegas area. A geo filter is used to get only tweets in Las Vegas 

tweets.zip
MapReduce job to clean the data collected from TwitterStreaming.java. Only time stamp and geo location information is kept after cleaning. 

Twitter.scala
Analyze the tweets distribution in each hour in Las Vegas. The city is divided into 100 boxes. Tweets is counted in each box each hour. 

location.scala
Map all the restaurants in Las Vegas into the 100 boxes defined in analyzing twitter data. This information is used in recommendation system 

Evaluation.scala
This file is used to evaluation our model. We randomly divided the user-business data into model and test sets. Model set contains 90% of the total data. We used vector similiarity to calculate the recommendation restaurants. Then evaluated the result with test data. Results is summarized in the paper

Recommendation.scala
This file is used for calculate recommendation for each user. The similiarity between user preference vector and business vector is used as primary ranking signal. Twitter data is used to adjust the ranking scores. 

UserBusinessMapping.zip
Mapreduce function for generating a mapping between each user to the list of merchants he've been to.

User.zip
Get rid of fields that are not user-id, business-id, or stars using map reduce. And calculate simple statistics of the distribution of number of average stars user give out : 0-1, 74; 1-2, 52678; 2-3; 63025; 3-4, 239034; 4-5, 193258; 5, 138487. It conforms to a normal distribution.

Review.zip
Generate mapping between business_id and the number of reviews this merchant received within our dataset.

user_vector.scala
This is for generating a two step mapping and calculating a preference vector containing all the attributes a user prefers. The first mapping is from a user to the list restaurants he/she visited and located in Las Vegas and he/she reviews 3 stars or up. And the second mapping is from a user to the attributes vectors these restaurants (generated by the first map) have. And then for one user, we add the vectors up, normalize each entry. Finally we obtain a final preference vector for each user. This vector represents the degree of preference a user has toward each attribute.

business_mapreduce.zip
Mapreduce function for preprocessing yelp_business_dataset.

business_attributes.scala
This is for generating a two step mapping and calculating a favourite restaurants vector containing all the restaurants a user prefers. The first mapping is to filter the business dataset with category “restaurant”, and match every attribution if it is, set 1, if it isn’t, set 0. The second mapping is to range and sort the restaurant list given a user’s reference vector based on the similarity calculation. 
